<!DOCTYPE html>
<html>
<body>

<h1>Badger API test</h1>
<h2>The onclick Event</h2>

<p>The onclick event triggers a function when an element is clicked on.</p>
<p>Click to trigger a function that will output "Hello World":</p>

<button onclick="myFunction()">Click me</button>

<p id="demo"></p>

<script>
function myFunction() {
  const xhr = new XMLHttpRequest();

  // listen for `load` event

  // create a JSON object
  const json = {
    "badgeclass": "hl9tl9gSTGa5qqpvNMoNMA",
    "issuer": "kVvMDnhsRvOOORZiW3sB8Q",
    "issuerOpenBadgeId": "https://api.ca.badgr.io/public/issuers/kVvMDnhsRvOOORZiW3sB8Q",
    "recipient": {
      "identity": "guillaume.proteau.b@gmail.com",
      "hashed": true,
      "type": "email",
      "plaintextIdentity": "guillaume.proteau.b@gmail.com",
      "salt": ""
    },
    "issuedOn": "2022-05-04T12:00:00Z",
    "narrative": null,
    "evidence": [],
    "expires": null,
    "extensions": {
      "extensions:recipientProfile": {
        "name": "Guillaume PB",
        "@context": "https://openbadgespec.org/extensions/recipientProfile/context.json",
        "type": [
          "Extension",
          "extensions:RecipientProfile"
        ]
      }
    }
  };

  // open request
  xhr.open('GET', 'https://api.ca.badgr.io/v2/badgeclasses');

  // Auth header...
  xhr.setRequestHeader('Authorization', 'Bearer 5iQowD1cJ8QggR7IIsBQfTQpdO0BRE');
  xhr.setRequestHeader('accept', 'application/json');
  xhr.setRequestHeader('Content-Type', 'application/json');

  xhr.onreadystatechange = function () {
   if (xhr.readyState === 4) {
      console.log(xhr.status);
      console.log(xhr.responseText);
   }};

  // send rquest with JSON payload
  xhr.send();
}
</script>

</body>
</html>
